# Web サービス「Sweet Sprouts」外部設計書

この外部設計書は、MVP（Minimum Viable Product）の機能に特化し、ユーザーがアプリを操作する際の画面構成と主要な操作フローを定義します。

## 1. ユーザーフロー (User Flow) の定義

Sweet Sprouts の主要なユーザーフローは以下の通りです。

1.  **アプリ初回起動/未ログイン時**:
    - アプリ起動 → ログイン/新規登録画面
2.  **ログイン後（既存ユーザー）**:
    - ログイン → ホーム画面（現在選択中のお子さんのタイムライン）
3.  **お子さん情報の登録**:
    - ホーム画面 → 設定/お子さん管理画面 → お子さん情報入力 → 保存
4.  **記録の追加**:
    - ホーム画面 → 記録追加ボタン → 記録種別選択（授乳/排泄） → 各記録入力画面 → 保存 → ホーム画面
5.  **記録の閲覧**:
    - ホーム画面（日付切り替え、お子さん切り替え）
    - ホーム画面の記録をタップ → 記録詳細・編集画面
6.  **記録の編集・削除**:
    - 記録詳細・編集画面 → 編集ボタン → 各記録入力画面（編集モード） → 更新 → ホーム画面
    - 記録詳細・編集画面 → 削除ボタン → 削除確認 → ホーム画面

---

## 2. 主要画面のワイヤーフレーム（画面構成）

各画面の要素配置や遷移を具体的にイメージします。片手操作を考慮し、主要な操作要素は画面下部に配置します。

### 2.1. ログイン/新規登録画面

- サービスロゴ/タイトル「Sweet Sprouts」
- メールアドレス入力欄
- パスワード入力欄
- ログインボタン
- 新規登録ボタン

### 2.2. お子さん選択・登録画面（初回ログイン時や設定画面から遷移）

- **初回ログイン時**: まずこの画面が表示され、お子さんの登録を促す。
- **画面タイトル**: 「お子さんを選択/登録」
- **登録済みのお子さんリスト**:
  - お子さんの名前、簡単な情報（年齢など）
  - 選択（タップ）でそのお子さんの記録タイムラインへ遷移
- **「新しいお子さんを登録」ボタン**: タップで「お子さん情報入力画面」へ遷移。

### 2.3. お子さん情報入力画面（新規登録/編集時）

- **画面タイトル**: 「お子さん情報登録」または「お子さん情報編集」
- **入力フォーム**:
  - お子さんの名前（必須）
  - 生年月日（オプション、日付ピッカー）
  - 性別（オプション、選択肢：男の子/女の子/不明）
- **保存ボタン** / **更新ボタン**
- **削除ボタン**（編集時のみ）

### 2.4. ホーム画面（タイムライン表示）

ユーザーがアプリにログイン後、最初に表示されるメイン画面です。

- **ヘッダー**:
  - **日付表示**: 上部に現在の日付。左右スワイプまたはタップで日付ピッカー表示による日付移動が可能。
  - **お子さん名表示 & 切り替え**: 現在表示されているお子さんの名前。タップすると、登録済みのお子さんリストが表示され、別のお子さんに切り替え可能。
  - 設定アイコン（歯車など）：タップで設定画面へ遷移。
- **記録一覧**: 選択中のお子さんの記録が時系列で表示されます。
  - 各記録項目は、タイプ（授乳/排泄）を示すアイコン、時刻、種類（例: 母乳、ミルク 120ml、うんち）、メモの一部が簡潔に表示されます。
  - タップで「記録詳細・編集画面」へ遷移。
- **記録追加ボタン**: 画面下部中央に大きく目立つ「+」ボタンを配置（片手操作を考慮）。タップで「記録選択画面」へ遷移。

### 2.5. 記録選択画面

ホーム画面の記録追加ボタンをタップした際に表示される、記録の種類を選ぶ画面です。

- **選択肢ボタン**:
  - 「授乳を記録」ボタン
  - 「排泄を記録」ボタン

### 2.6. 授乳記録入力画面

授乳の詳細を入力する画面です。

- **選択中のお子さん表示**: 画面上部にお子さんの名前を表示。
- **授乳タイプ選択**:
  - 「直接授乳」「搾乳（母乳）」「ミルク」の切り替えタブまたはラジオボタン。
- **入力項目（タイプに応じて表示切り替え）**:
  - **直接授乳**:
    - 左右選択（「左」「右」「両方」のラジオボタンまたは切り替え）
  - **搾乳（母乳）/ミルク**:
    - 量入力欄 (数字キーボードで入力、単位「ml」)
  - **共通**:
    - **開始時刻入力欄**: デフォルトで現在時刻、修正可能、タイムピッカー利用。
    - **終了時刻入力欄**: デフォルトで開始時刻と同じか、現在時刻、修正可能、タイムピッカー利用。終了時刻は開始時刻以降であることをバリデーションする。
- **メモ入力欄**: テキストエリア（複数行入力可、文字数制限あり）
- **保存ボタン**: 画面下部に配置（片手操作を考慮）。

### 2.7. 排泄記録入力画面

排泄の詳細を入力する画面です。

- **選択中のお子さん表示**: 画面上部にお子さんの名前を表示。
- **排泄タイプ選択**:
  - 「うんち」「おしっこ」の切り替えタブまたはラジオボタン。
- **入力項目（タイプに応じて表示切り替え）**:
  - **うんちの場合**:
    - 状態選択 (例: 「固形」「ゆるい」「下痢」「その他」の選択肢)
  - **おしっこの場合**:
    - 状態選択 (例: 「あり」「なし」の選択肢)
  - **共通**:
    - 時刻入力欄 (デフォルトで現在時刻、修正可能、タイムピッカー利用)
- **メモ入力欄**: テキストエリア（複数行入力可、文字数制限あり）
- **保存ボタン**: 画面下部に配置（片手操作を考慮）。

### 2.8. 記録詳細・編集画面

タイムラインで既存の記録をタップした際に表示される、詳細確認・編集用の画面です。

- **表示項目**: 各記録入力画面で入力した全ての項目を表示。
- **編集ボタン**: 画面右上に配置（タップで入力画面と同じ形式の編集モードに切り替わる）。
- **削除ボタン**: 画面下部または編集モード時に配置。

---

### 3. 操作・遷移の定義（概要）

- ログイン後、**未登録のお子さんがいる場合**は「お子さん選択・登録画面」へ強制遷移。
- ホーム画面の「+」ボタン → 記録選択画面。
- 記録選択画面の「授乳を記録」→ 授乳記録入力画面。
- 記録選択画面の「排泄を記録」→ 排泄記録入力画面。
- 各入力画面の「保存」ボタン → ホーム画面 (保存した記録が表示される)。
- ホーム画面の既存記録タップ → 記録詳細・編集画面。
- 記録詳細・編集画面の「編集」ボタン → (編集可能な) 記録入力画面。
- 記録詳細・編集画面の「削除」ボタン → 削除確認ダイアログ → ホーム画面。
- ヘッダーのお子さん名タップ → お子さん選択・登録画面。
- ヘッダーの設定アイコンタップ → 設定画面（MVP ではシンプルにユーザー情報/ログアウトのみ）。

---

### 4. モバイルでの使いやすさの考慮（再確認）

- **片手操作**: 主要なボタンや操作（記録追加、保存など）は、スマートフォンの片手操作で届きやすい画面下部中央〜右下エリアに配置。
- **視認性**: フォントサイズ、ボタンの大きさ、色のコントラストなど、視認性を高める。
- **入力補助**: 日付・時刻入力はピッカーを利用。数値入力はテンキーを自動表示。
- **簡潔な表示**: タイムライン表示では主要情報のみを表示し、詳細はタップで確認。

---
